import React, { useState } from "react";
import { NavLink, useLocation } from "react-router-dom";
import logo from "../assets/img/logo.svg";
import { useDispatch } from "react-redux";
import { handleChange } from "../store/MenuSlice";

export default function Logo() {
  const location = useLocation();
  const pathname = location.pathname.replace("/dashboard", "");
  const returnSettingText = [
    "settings",
    "create",
    "ticket-field",
    "trigger",
    "/operating-hours",
    "/store",
    "/chat",
    "/manage",
    "/order",
  ].some((item) => pathname.includes(item));
  const newTitle =
    pathname === "/"
      ? "Home"
      : returnSettingText
      ? "Settings"
      : (location.pathname === "/"
          ? "Home"
          : location.pathname
              .replace("/dashboard", "")
              .replace(/\//g, " > ")
              .replace(/-/g, " ")
        ).replace(/^ ?> /, "");

  const [dropDown, setDropDown] = useState(false);
  const dropDownList = [
    {
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M15.8334 9.58317H16.2501C17.0292 9.58317 17.4184 9.58317 17.7084 9.75067C17.8984 9.86038 18.0562 10.0182 18.1659 10.2082C18.3334 10.4982 18.3334 10.8873 18.3334 11.6665C18.3334 12.4457 18.3334 12.8348 18.1659 13.1248C18.0562 13.3148 17.8984 13.4726 17.7084 13.5823C17.4184 13.7498 17.0292 13.7498 16.2501 13.7498H15.8334M4.16675 9.58317H3.75008C2.97091 9.58317 2.58175 9.58317 2.29175 9.75067C2.10174 9.86038 1.94395 10.0182 1.83425 10.2082C1.66675 10.4982 1.66675 10.8873 1.66675 11.6665C1.66675 12.4457 1.66675 12.8348 1.83425 13.1248C1.94395 13.3148 2.10174 13.4726 2.29175 13.5823C2.58175 13.7498 2.97091 13.7498 3.75008 13.7498H4.16675M10.0001 4.1665C10.3316 4.1665 10.6495 4.03481 10.884 3.80039C11.1184 3.56597 11.2501 3.24802 11.2501 2.9165C11.2501 2.58498 11.1184 2.26704 10.884 2.03262C10.6495 1.7982 10.3316 1.6665 10.0001 1.6665C9.66856 1.6665 9.35062 1.7982 9.1162 2.03262C8.88178 2.26704 8.75008 2.58498 8.75008 2.9165C8.75008 3.24802 8.88178 3.56597 9.1162 3.80039C9.35062 4.03481 9.66856 4.1665 10.0001 4.1665ZM10.0001 4.1665V6.6665M7.50008 9.99984V10.8332M12.5001 9.99984V10.8332M9.16675 6.6665H10.8334C13.1901 6.6665 14.3692 6.6665 15.1009 7.399C15.8334 8.13067 15.8334 9.30984 15.8334 11.6665C15.8334 14.0232 15.8334 15.2023 15.1009 15.934C14.3692 16.6665 13.1901 16.6665 10.8334 16.6665H10.0001C10.0001 16.6665 9.58341 18.3332 6.66675 18.3332C6.66675 18.3332 7.50008 17.4923 7.50008 16.6523C6.20591 16.6132 5.43341 16.469 4.89925 15.934C4.16675 15.2023 4.16675 14.0232 4.16675 11.6665C4.16675 9.30984 4.16675 8.13067 4.89925 7.399C5.63091 6.6665 6.81008 6.6665 9.16675 6.6665Z"
            stroke="#858585"
            strokeWidth="1.25"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M8.33325 13.75C8.33325 13.75 8.88909 14.1667 9.99992 14.1667C11.1108 14.1667 11.6666 13.75 11.6666 13.75"
            stroke="#858585"
            strokeWidth="1.25"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
      ),
      name: "AI Agent",
      path: "/app/ai-agent",
    },
    {
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8.33325 2.68604C7.163 2.95302 6.0739 3.49689 5.15739 4.27197C4.24087 5.04706 3.52371 6.03073 3.06611 7.1404C2.60851 8.25006 2.42384 9.45333 2.5276 10.6491C2.63136 11.845 3.02053 12.9984 3.66242 14.0127L2.49992 17.5002L5.98742 16.3377C7.00168 16.9796 8.15515 17.3688 9.35097 17.4725C10.5468 17.5763 11.7501 17.3916 12.8597 16.934C13.9694 16.4764 14.9531 15.7592 15.7281 14.8427C16.5032 13.9262 17.0471 12.8371 17.3141 11.6669M17.3141 8.33353C16.9994 6.9562 16.3025 5.6956 15.3035 4.69659C14.3045 3.69757 13.0439 3.0007 11.6666 2.68604M14.1666 10.0002C14.1666 8.89513 13.7276 7.83532 12.9462 7.05392C12.1648 6.27252 11.105 5.83354 9.99992 5.83354M10.8333 10.0002C10.8333 9.77919 10.7455 9.56723 10.5892 9.41095C10.4329 9.25467 10.2209 9.16687 9.99992 9.16687"
            stroke="#858585"
            strokeWidth="1.08333"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
      ),
      name: "Help Center",
      path: "/app/help-center",
    },
    {
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M16.5724 10.4423L17.7024 11.4485C17.9111 11.6227 18.0505 11.8657 18.0954 12.1338C18.1404 12.4018 18.0878 12.6771 17.9474 12.9098L16.5849 15.2373C16.4792 15.4154 16.3282 15.5625 16.1474 15.6635C15.9644 15.7648 15.759 15.8185 15.5499 15.8198C15.4202 15.8206 15.2911 15.8012 15.1674 15.7623L13.7211 15.2848C13.4678 15.4473 13.2045 15.5927 12.9311 15.721L12.6274 17.1873C12.5712 17.457 12.421 17.698 12.2036 17.8673C11.9835 18.0396 11.7106 18.1306 11.4311 18.1248H8.60988C8.3304 18.1306 8.0575 18.0396 7.83738 17.8673C7.62048 17.6978 7.47077 17.4568 7.41488 17.1873L7.10988 15.721C6.84013 15.591 6.57841 15.4449 6.32613 15.2835L4.87488 15.7623C4.75114 15.8012 4.62209 15.8206 4.49238 15.8198C4.28371 15.8183 4.07872 15.7646 3.89613 15.6635C3.71543 15.5628 3.56451 15.4162 3.45863 15.2385L2.04738 12.9098C1.90067 12.675 1.84461 12.3948 1.88971 12.1216C1.93481 11.8485 2.07798 11.6012 2.29238 11.426L3.42113 9.99977V9.55727L2.29113 8.55102C2.08246 8.37689 1.94303 8.1338 1.89809 7.86576C1.85315 7.59771 1.90567 7.32244 2.04613 7.08977L3.45738 4.76227C3.56309 4.5841 3.71402 4.43705 3.89488 4.33602C4.07747 4.23498 4.28246 4.18127 4.49113 4.17977C4.61968 4.17166 4.7487 4.18347 4.87363 4.21477L6.29613 4.71477C6.5503 4.55227 6.81363 4.40685 7.08613 4.27852L7.39113 2.81227C7.44701 2.54273 7.59673 2.30177 7.81363 2.13227C8.03375 1.95995 8.30665 1.86899 8.58613 1.87477H11.3836C11.6631 1.86899 11.936 1.95995 12.1561 2.13227C12.3749 2.30352 12.5249 2.54477 12.5786 2.81227L12.8836 4.27852C13.1545 4.40769 13.4157 4.55352 13.6674 4.71602L15.1199 4.23852C15.2811 4.18608 15.4514 4.16767 15.6201 4.18445C15.7888 4.20123 15.9522 4.25285 16.0999 4.33602C16.2811 4.43852 16.4311 4.58602 16.5374 4.76102L17.9474 7.08977C18.0961 7.32255 18.155 7.60148 18.1131 7.8745C18.0713 8.14752 17.9315 8.39599 17.7199 8.57352L16.5724 9.55102V10.4423Z"
            stroke="#858585"
            strokeWidth="1.08333"
          />
          <path
            d="M13.125 10C13.125 10.8288 12.7958 11.6237 12.2097 12.2097C11.6237 12.7958 10.8288 13.125 10 13.125C9.1712 13.125 8.37634 12.7958 7.79029 12.2097C7.20424 11.6237 6.875 10.8288 6.875 10C6.875 9.1712 7.20424 8.37634 7.79029 7.79029C8.37634 7.20424 9.1712 6.875 10 6.875C10.8288 6.875 11.6237 7.20424 12.2097 7.79029C12.7958 8.37634 13.125 9.1712 13.125 10Z"
            stroke="#858585"
            strokeWidth="1.08333"
          />
        </svg>
      ),
      name: "Settings",
      path: "/app/chat",
    },
    {
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M5.99982 6C5.99982 5.86739 6.0525 5.74022 6.14627 5.64645C6.24004 5.55268 6.36721 5.5 6.49982 5.5H9.49982C9.63243 5.5 9.75961 5.55268 9.85338 5.64645C9.94714 5.74022 9.99982 5.86739 9.99982 6C9.99982 6.13261 9.94714 6.25979 9.85338 6.35355C9.75961 6.44732 9.63243 6.5 9.49982 6.5H6.49982C6.36721 6.5 6.24004 6.44732 6.14627 6.35355C6.0525 6.25979 5.99982 6.13261 5.99982 6ZM6.49982 7.5C6.36721 7.5 6.24004 7.55268 6.14627 7.64645C6.0525 7.74022 5.99982 7.86739 5.99982 8C5.99982 8.13261 6.0525 8.25979 6.14627 8.35355C6.24004 8.44732 6.36721 8.5 6.49982 8.5H8.49982C8.63243 8.5 8.75961 8.44732 8.85338 8.35355C8.94714 8.25979 8.99982 8.13261 8.99982 8C8.99982 7.86739 8.94714 7.74022 8.85338 7.64645C8.75961 7.55268 8.63243 7.5 8.49982 7.5H6.49982ZM7.99982 1C6.95887 0.99965 5.93574 1.27012 5.03095 1.78485C4.12617 2.29957 3.37086 3.04083 2.83925 3.9358C2.30764 4.83077 2.01801 5.84864 1.99882 6.88942C1.97964 7.93019 2.23155 8.95805 2.72982 9.872L2.01982 12.362C1.99484 12.4494 1.99417 12.542 2.0179 12.6298C2.04162 12.7176 2.08884 12.7972 2.15446 12.8602C2.22008 12.9231 2.30163 12.967 2.39032 12.9871C2.47902 13.0071 2.5715 13.0026 2.65782 12.974L4.99582 12.195C5.79268 12.6555 6.68479 12.9265 7.60314 12.987C8.52148 13.0475 9.44145 12.896 10.2919 12.5441C11.1423 12.1922 11.9003 11.6494 12.5074 10.9577C13.1145 10.266 13.5543 9.44389 13.7928 8.555C14.0313 7.6661 14.0622 6.73425 13.8829 5.83153C13.7037 4.92882 13.3192 4.07943 12.7592 3.34908C12.1992 2.61873 11.4787 2.027 10.6534 1.61967C9.82809 1.21233 8.92016 1.00031 7.99982 1ZM2.99982 7C2.99999 5.8906 3.36911 4.81277 4.04907 3.93618C4.72903 3.05959 5.68122 2.43403 6.75573 2.15799C7.83023 1.88195 8.96603 1.97111 9.9843 2.41142C11.0026 2.85174 11.8455 3.6182 12.3804 4.59015C12.9152 5.5621 13.1116 6.68433 12.9387 7.78016C12.7658 8.876 12.2333 9.8832 11.4251 10.6432C10.6169 11.4032 9.57892 11.8728 8.47454 11.9782C7.37015 12.0835 6.2621 11.8185 5.32482 11.225C5.26213 11.1853 5.19137 11.16 5.11769 11.151C5.044 11.142 4.96924 11.1495 4.89882 11.173L3.24082 11.726L3.75082 9.945C3.76941 9.87941 3.77438 9.81071 3.76544 9.74313C3.75649 9.67554 3.73382 9.6105 3.69882 9.552C3.24088 8.77954 2.99943 7.898 2.99982 7ZM12.2758 14.947L9.87382 13.747C10.3152 13.6237 10.7362 13.461 11.1368 13.259L12.4998 13.941L16.9998 11.691V11C16.9998 10.7348 16.8945 10.4804 16.7069 10.2929C16.5194 10.1054 16.265 10 15.9998 10H14.3258C14.4792 9.67933 14.6072 9.346 14.7098 9H15.9998C16.5303 9 17.039 9.21071 17.414 9.58579C17.7891 9.96086 17.9998 10.4696 17.9998 11V16C17.9998 16.5304 17.7891 17.0391 17.414 17.4142C17.039 17.7893 16.5303 18 15.9998 18H8.99982C8.46939 18 7.96068 17.7893 7.58561 17.4142C7.21054 17.0391 6.99982 16.5304 6.99982 16V13.93C7.32649 13.9767 7.65982 14 7.99982 14V16C7.99982 16.2652 8.10518 16.5196 8.29272 16.7071C8.48025 16.8946 8.73461 17 8.99982 17H15.9998C16.265 17 16.5194 16.8946 16.7069 16.7071C16.8945 16.5196 16.9998 16.2652 16.9998 16V12.809L12.7238 14.947C12.6543 14.9818 12.5776 15 12.4998 15C12.4221 15 12.3454 14.9818 12.2758 14.947Z"
            fill="#858585"
          />
        </svg>
      ),
      name: "Tickets",
      path: "/app/tickets",
    },
    {
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M1.66675 9.99984C1.66675 6.0715 1.66675 4.10734 2.88675 2.8865C4.10841 1.6665 6.07175 1.6665 10.0001 1.6665C13.9284 1.6665 15.8926 1.6665 17.1126 2.8865C18.3334 4.10817 18.3334 6.0715 18.3334 9.99984C18.3334 13.9282 18.3334 15.8923 17.1126 17.1123C15.8934 18.3332 13.9284 18.3332 10.0001 18.3332C6.07175 18.3332 4.10758 18.3332 2.88675 17.1123C1.66675 15.8932 1.66675 13.9282 1.66675 9.99984Z"
            stroke="#858585"
            strokeWidth="1.25"
          />
          <path
            d="M5.83325 15V12.5M9.99992 15V10M14.1666 15V7.5"
            stroke="#858585"
            strokeWidth="1.25"
            strokeLinecap="round"
          />
        </svg>
      ),
      name: "Analytics Dashboard",
      path: "dashboard/live",
    },
    {
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M10.8334 18.2915C10.5595 18.3193 10.2817 18.3332 10.0001 18.3332C5.39758 18.3332 1.66675 14.6023 1.66675 9.99984C1.66675 5.39734 5.39758 1.6665 10.0001 1.6665C14.6026 1.6665 18.3334 5.39734 18.3334 9.99984C18.3334 10.2815 18.3195 10.5593 18.2917 10.8332"
            stroke="#858585"
            strokeWidth="1.25"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M6.25 14.1668C7.41833 12.9427 9.18417 12.4202 10.8333 12.6618M12.0792 7.91683C12.0792 9.06683 11.1458 10.0002 9.99333 10.0002C9.71947 10.0006 9.4482 9.94704 9.19505 9.84254C8.94191 9.73804 8.71185 9.58465 8.51804 9.39115C8.32423 9.19765 8.17048 8.96784 8.06557 8.71486C7.96066 8.46188 7.90667 8.1907 7.90667 7.91683C7.90667 6.76683 8.84 5.8335 9.99333 5.8335C10.2671 5.83317 10.5383 5.88681 10.7914 5.99136C11.0444 6.09591 11.2744 6.24932 11.4681 6.44281C11.6618 6.6363 11.8155 6.86607 11.9203 7.119C12.0252 7.37192 12.0792 7.64303 12.0792 7.91683Z"
            stroke="#858585"
            strokeWidth="1.25"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M15.4167 18.3333C17.0275 18.3333 18.3333 17.0275 18.3333 15.4167C18.3333 13.8058 17.0275 12.5 15.4167 12.5C13.8058 12.5 12.5 13.8058 12.5 15.4167C12.5 17.0275 13.8058 18.3333 15.4167 18.3333Z"
            stroke="#858585"
            strokeWidth="1.25"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
      ),
      name: "Super Admin Manager",
      path: "/app/admin",
    },
  ];

  const dispatch = useDispatch();

  return (
    <div className="relative">
      <button
        onClick={() => setDropDown(!dropDown)}
        className="flex items-center gap-3 cursor-pointer"
      >
        <div className="flex-none">
          <img src={logo} alt="" />
        </div>
        <div className="flex-none text-start">
          <strong className="font-inter font-medium text-sm text-[#0A0D14] block mb-1">
            Jarvey AI
          </strong>
          <p className="flex items-center gap-1">
            <span
              className={`font-inter font-normal text-xs ${
                dropDown ? "text-primary" : "text-[#525866]"
              } capitalize`}
            >
              {location.pathname.startsWith("/ticket/")
                ? "Tickets"
                : newTitle.substring(0, 23)}
              {newTitle.length > 22 && "..."}
            </span>
            <svg
              className={`${dropDown ? "-scale-y-100" : "scale-y-100"}`}
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M13.3332 6L8.94266 10.3905C8.42196 10.9112 7.57774 10.9112 7.05704 10.3905L2.6665 6"
                stroke="#111111"
                strokeOpacity="0.7"
                strokeWidth="1.25"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
            </svg>
          </p>
        </div>
      </button>

      {dropDown && (
        <div
          style={{ zIndex: 1 }}
          className="layout-menu max-h-[300px] overflow-y-auto absolute w-full min-w-[240px] top-full left-11 mt-2 bg-white rounded-2xl shadow-[0px_4px_20px_0px_rgba(0,0,0,0.16)] p-2 md:p-3 flex flex-col gap-2"
        >
          {dropDownList.map((item, index) => (
            <NavLink
              onClick={() => {
                setDropDown(false);
                window.innerWidth < 991 && dispatch(handleChange());
              }}
              key={index}
              to={item.path}
              className="flex items-center gap-2 px-3 py-2 text-sm font-inter font-medium !leading-[145%] text-[#858585] rounded-lg hover:bg-[#F1EEFF]"
            >
              {item.icon}
              <span>{item.name}</span>
            </NavLink>
          ))}
        </div>
      )}
    </div>
  );
}
